@inherits LayoutComponentBase
@inject ApiService apiService
@inject IConfiguration configuration

<MudThemeProvider Theme="@currentTheme" />
<MudDialogProvider />
<MudSnackbarProvider />

<PageTitle>FMS.Blazor.Server</PageTitle>

<div class="page">
    <main>
        <article class="content px-4">
            <MudLayout>
                <MudAppBar Elevation="1" >
                    <MudText Typo="Typo.h5" Class="ml-3">Weather</MudText>
                    <MudSpacer />

                    <MudButton OnClick="@((e) => DarkMode())" Variant="Variant.Filled" Color="Color.Tertiary">
                        Theme
                    </MudButton>

                    <MudIconButton Icon="@Icons.Material.Filled.MoreVert" Color="Color.Inherit" Edge="Edge.End" />
                </MudAppBar>
                <MudMainContent>
                    @Body
                </MudMainContent>

                <MudAppBar Bottom="true" Fixed="true" Elevation="1">
                    @{
                        if (apiService.APIBaseAddress != null)
                            {
                                var cityApiDocUrl = Path.Combine(apiService.APIBaseAddress, configuration["CityApiDoc"]);
                                var cityApiSpecUrl = Path.Combine(apiService.APIBaseAddress, configuration["CityApiSpec"]);

                                <MudButton StartIcon="@Icons.Material.Filled.Api" Color="Color.Secondary" Edge="Edge.End">
                                    <a href="@cityApiSpecUrl" target="_blank" style="color:#ffffff;" >API Spec</a>
                                </MudButton>

                                <MudButton StartIcon="@Icons.Material.Filled.IntegrationInstructions" Color="Color.Secondary" Edge="Edge.End">

                                    <a style="color:#ffffff;" href="@cityApiDocUrl" target="_blank">API Docs</a>
                                </MudButton>
                            }
                    }

                </MudAppBar>
            </MudLayout>
        </article>
    </main>
</div>

@code{
    protected override void OnInitialized()
    {
        currentTheme = defaultTheme;
    }
}